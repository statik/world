name: lint

on:
  push:
    branches-ignore:
      - main

jobs:
  # Can't use a matrix here because `uses` doesn't accept expressions.
  # https://github.community/t/expressions-in-docker-uri/16271
  buildifier:
    runs-on: ubuntu-18.04
    steps:
      - uses: actions/checkout@v2.3.1
        with:
          fetch-depth: 2
      - name: lint
        uses: docker://whilp/buildifier:latest@sha256:740f8b6c19908614b3a8846e442d2671b6ebeaf2759fc1af0786bf3e0b038083
      - run: git diff --exit-code

  black:
    runs-on: ubuntu-18.04
    steps:
      - uses: actions/checkout@v2.3.1
        with:
          fetch-depth: 2
      - name: lint
        uses: docker://whilp/black:latest@sha256:1290c3063a26f117a63fc5b930c06fe71e6083c547b1bc578cbf73db89e8243b
      - run: git diff --exit-code

  shfmt:
    runs-on: ubuntu-18.04
    steps:
      - uses: actions/checkout@v2.3.1
        with:
          fetch-depth: 2
      - name: lint
        uses: docker://containers.pkg.github.com/whilp/shfmt:latest@sha256:651cab18dea4607a3398b81ca198dd3cd5e24bd5c8454291c36657b7b9fd7651
      - run: git diff --exit-code

  prettier:
    runs-on: ubuntu-18.04
    steps:
      - uses: actions/checkout@v2.3.1
        with:
          fetch-depth: 2
      - name: lint
        uses: docker://whilp/prettier:latest@sha256:65a016d2d260fd5b9e0476e90cc2b2870d2ab3c958d58ca57ebe6368243d42f5
      - run: git diff --exit-code

  eslint:
    runs-on: ubuntu-18.04
    steps:
      - uses: actions/checkout@v2.3.1
        with:
          fetch-depth: 2
      - name: lint
        uses: docker://whilp/eslint:latest@sha256:e2ec9c62f8e811ac99c5b7f5d5fe785dde5fb68926308bbde39cfc2757447eee
      - run: git diff --exit-code

  golangci-lint:
    runs-on: ubuntu-18.04
    steps:
      - uses: actions/checkout@v2.3.1
        with:
          fetch-depth: 2
      - name: lint
        uses: docker://whilp/golangci-lint:latest@sha256:1d0fec052dd691f2de374a10be8aedfe5b7b241790e86f826fa424d1b96fd280
      - run: git diff --exit-code
